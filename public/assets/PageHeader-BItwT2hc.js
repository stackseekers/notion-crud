import{a as M,e as se,f as re,g as oe,h as ne,i as le,j as ce,k as me,l as ue}from"./vendor-primevue-BXJVR7wj.js";import{y as b,c as s,d as a,e as n,z as v,s as c,F as k,E as U,t as m,h as q,v as p,L as V,q as _,p as E,J as ie}from"./vendor-vue-3gpeyM8i.js";import{d as de,e as pe,h as ye,i as ve,j as D,k as be,l as ge,m as he,b as xe,n as ke}from"./_plugin-vue_export-helper-TkE8fKGx.js";const _e={key:0,class:"text-center py-8 text-gray-500"},we={key:1,class:"space-y-6"},Ue={key:0,class:"absolute top-4 right-4"},qe={class:"space-y-2"},Ve=["for"],Ee={key:0,class:"text-red-600 text-xs"},Fe={key:1,class:"space-y-4"},je={class:"grid grid-cols-1 gap-4"},Ce=["for"],Se={key:0,class:"mr-2 text-lg"},Be={key:2,class:"text-red-500 ml-1"},$e={key:0,class:"text-red-600 block"},Ae={key:2,class:"space-y-4"},Le={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Ie=["for"],Oe={key:0,class:"mr-2 text-lg"},Ne={key:2,class:"text-red-500 ml-1"},ze={key:0,class:"text-red-600 block"},De={key:3,class:"space-y-4"},Me={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},fe=["for"],Te={key:0,class:"mr-2 text-lg"},Je={class:"text-green-600 ml-1"},Ke={key:2,class:"text-red-500 ml-1"},Re={class:"relative"},He={key:0,class:"text-red-600 block"},Ge={key:4,class:"space-y-4"},Qe={class:"space-y-4"},We=["for"],Xe={key:0,class:"mr-2 text-lg"},Ye={key:2,class:"text-red-500 ml-1"},Ze={class:"relative"},Pe={key:0,class:"text-red-600 block"},et={key:5,class:"space-y-4"},tt={class:"grid grid-cols-1 gap-4"},at=["for"],st={key:0,class:"mr-2 text-lg"},rt={key:2,class:"text-red-500 ml-1"},ot={class:"flex items-center gap-2"},nt={key:0,class:"mt-2"},lt={class:"flex items-center gap-2"},ct={key:2,class:"text-red-600 block"},mt={key:6,class:"space-y-4"},ut={class:"grid grid-cols-1 gap-4"},it=["for"],dt={key:0,class:"mr-2 text-lg"},pt={key:2,class:"text-red-500 ml-1"},yt={key:0,class:"text-red-600 block"},vt={key:7,class:"space-y-4"},bt={class:"grid grid-cols-1 gap-4"},gt=["for"],ht={key:0,class:"mr-2 text-lg"},xt={key:2,class:"text-red-500 ml-1"},kt={key:3,class:"text-red-600 block"},_t={class:"flex justify-end gap-3 pt-6 border-t border-gray-200"},Ct={__name:"FormFields",props:{editingItem:{type:Object,default:null},submitting:{type:Boolean,default:!1},formErrors:{type:Object,default:()=>({})}},emits:["submitForm","refreshSchema","update:formData","cancelForm"],setup(l,{emit:F}){const y=r=>w.editingItem?.[r]?.value||"",w=l,g=F,f=b(()=>w.editingItem?"Update Item":"Add Item"),T=b(()=>w.editingItem?"Updating...":"Adding..."),h=b(()=>w.editingItem?Object.entries(w.editingItem).map(([r,t])=>{let u=t.type;return t.multi_select&&Array.isArray(t.multi_select)&&(u="multi_select"),t.files&&Array.isArray(t.files)&&(u="files"),{name:r,type:u,required:t.required||!1,value:t.value||"",options:u==="select"||u==="multi_select"?ve(t):[],icon:ye(r,u,t.number?.format),emoji:t.emoji||null,label:pe(r),placeholder:de(r,u,t.number?.format),format:t.number?.format,min:u==="number"?0:void 0,step:u==="number"?t.number?.format&&t.number?.format!=="number"?500:1:void 0,id:t.id,number:t.number,select:t.select,multi_select:t.multi_select,...Object.fromEntries(Object.entries(t).filter(([i])=>!["number","select","multi_select"].includes(i)))}}):[]),j=b(()=>h.value.filter(r=>r.type==="title")),C=b(()=>h.value.filter(r=>{const t=r.name.toLowerCase();return t.includes("email")||t.includes("phone")||t.includes("contact")||r.type==="email"||r.type==="phone"})),S=b(()=>h.value.filter(r=>r.type==="number"&&r.format&&r.format!=="number")),B=b(()=>h.value.filter(r=>r.type==="number"&&(!r.format||r.format==="number"))),$=b(()=>h.value.filter(r=>r.type==="checkbox")),A=b(()=>h.value.filter(r=>r.type==="select"||r.type==="multi_select")),L=b(()=>h.value.filter(r=>r.type==="files")),I=b(()=>h.value.filter(r=>{const t=r.name.toLowerCase(),u=t.includes("email")||t.includes("phone")||t.includes("contact")||r.type==="email"||r.type==="phone";return r.type!=="title"&&r.type!=="number"&&r.type!=="checkbox"&&r.type!=="select"&&r.type!=="multi_select"&&r.type!=="files"&&!u})),x=(r,t)=>{g("update:formData",{[r]:t})},O=r=>{const t=y(r);if(Array.isArray(t))return t;if(typeof t=="string"&&t)try{const u=JSON.parse(t);return Array.isArray(u)?u:[]}catch{return t.split(",").map(i=>i.trim()).filter(i=>i)}return[]},N=(r,t)=>{g("update:formData",{[r]:t})},J=(r,t)=>{const i=O(r).filter(d=>typeof d=="string"&&typeof t=="string"?d!==t:typeof d=="object"&&typeof t=="object"?d.value!==t.value:d!==t);N(r,i)},K=r=>{const t=w.editingItem?.[r]?.value||[];return Array.isArray(t)?t:[]},R=(r,t)=>{const u=Array.from(t||[]).map(i=>({name:i.name,size:i.size,type:i.type,lastModified:i.lastModified,file:i,preview:URL.createObjectURL(i)}));g("update:formData",{[r]:u})},H=(r,t)=>{const i=(r.files||[]).map(d=>({name:d.name,size:d.size,type:d.type,lastModified:d.lastModified,file:d,preview:URL.createObjectURL(d)}));g("update:formData",{[t]:i})},G=(r,t)=>{},Q=async(r,t)=>{try{const u=r.xhr?.response;if(u){const i=JSON.parse(u);i.success&&i.files?g("update:formData",{[t]:i.files.map(d=>({name:d.name,url:d.url,type:d.type,size:d.size,blobKey:d.blobKey}))}):console.error("Upload failed:",i.error)}}catch(u){console.error("Upload processing failed:",u)}},W=()=>{g("submitForm")},X=()=>{g("cancelForm")},Y=()=>{g("refreshSchema")};return(r,t)=>{const u=M,i=se,d=re,z=oe,Z=ne,P=le,ee=ce,te=me,ae=ue;return a(),s("form",{onSubmit:ie(W,["prevent"]),class:"space-y-6 relative"},[h.value.length?(a(),s("div",we,[$.value.length>0?(a(),s("div",Ue,[n("div",qe,[(a(!0),s(k,null,U($.value,e=>(a(),s("div",{key:e.name,class:"flex items-center gap-2 p-2 bg-gray-50 rounded-lg border border-gray-200"},[v(i,{id:e.name,"model-value":y(e.name),"onUpdate:modelValue":o=>x(e.name,o),binary:!0},null,8,["id","model-value","onUpdate:modelValue"]),n("label",{for:e.name,class:"text-sm text-gray-700 cursor-pointer"},m(e.description||e.label),9,Ve),l.formErrors[e.name]?(a(),s("small",Ee,m(l.formErrors[e.name]),1)):c("",!0)]))),128))])])):c("",!0),j.value.length>0?(a(),s("div",Fe,[n("div",je,[(a(!0),s(k,null,U(j.value,e=>(a(),s("div",{key:e.name,class:"space-y-2"},[n("label",{for:e.name,class:"block text-sm font-medium text-gray-700"},[e.emoji?(a(),s("span",Se,m(e.emoji),1)):e.icon?(a(),s("i",{key:1,class:p([e.icon,"mr-2 text-gray-500"])},null,2)):c("",!0),q(" "+m(e.label)+" ",1),e.required?(a(),s("span",Be,"*")):c("",!0)],8,Ce),v(d,{id:e.name,type:e.type,placeholder:e.placeholder,required:e.required,"model-value":y(e.name),"onUpdate:modelValue":o=>x(e.name,o),class:p([{"p-invalid":l.formErrors[e.name]},"w-full"])},null,8,["id","type","placeholder","required","model-value","onUpdate:modelValue","class"]),l.formErrors[e.name]?(a(),s("small",$e,m(l.formErrors[e.name]),1)):c("",!0)]))),128))])])):c("",!0),C.value.length>0?(a(),s("div",Ae,[n("div",Le,[(a(!0),s(k,null,U(C.value,e=>(a(),s("div",{key:e.name,class:"space-y-2"},[n("label",{for:e.name,class:"block text-sm font-medium text-gray-700"},[e.emoji?(a(),s("span",Oe,m(e.emoji),1)):e.icon?(a(),s("i",{key:1,class:p([e.icon,"mr-2 text-gray-500"])},null,2)):c("",!0),q(" "+m(e.label)+" ",1),e.required?(a(),s("span",Ne,"*")):c("",!0)],8,Ie),v(d,{id:e.name,type:e.type,placeholder:e.placeholder,required:e.required,"model-value":y(e.name),"onUpdate:modelValue":o=>x(e.name,o),class:p([{"p-invalid":l.formErrors[e.name]},"w-full"])},null,8,["id","type","placeholder","required","model-value","onUpdate:modelValue","class"]),l.formErrors[e.name]?(a(),s("small",ze,m(l.formErrors[e.name]),1)):c("",!0)]))),128))])])):c("",!0),S.value.length>0?(a(),s("div",De,[n("div",Me,[(a(!0),s(k,null,U(S.value,e=>(a(),s("div",{key:e.name,class:"space-y-2"},[n("label",{for:e.name,class:"block text-sm font-medium text-gray-700"},[e.emoji?(a(),s("span",Te,m(e.emoji),1)):e.icon?(a(),s("i",{key:1,class:p([e.icon,"mr-2 text-gray-500"])},null,2)):c("",!0),q(" "+m(e.label)+" ",1),n("span",Je,"("+m(V(D)[e.format]?.currency||"USD")+")",1),e.required?(a(),s("span",Ke,"*")):c("",!0)],8,fe),n("div",Re,[v(z,{id:e.name,placeholder:e.placeholder,required:e.required,min:e.min||0,max:e.max,step:e.step,"model-value":y(e.name),"onUpdate:modelValue":o=>x(e.name,o),class:p([{"p-invalid":l.formErrors[e.name]},"w-full"]),showButtons:"",buttonLayout:"horizontal",mode:"currency",currency:V(D)[e.format]?.currency||"USD"},{incrementbuttonicon:_(()=>t[1]||(t[1]=[n("span",{class:"pi pi-plus"},null,-1)])),decrementbuttonicon:_(()=>t[2]||(t[2]=[n("span",{class:"pi pi-minus"},null,-1)])),_:2},1032,["id","placeholder","required","min","max","step","model-value","onUpdate:modelValue","class","currency"])]),l.formErrors[e.name]?(a(),s("small",He,m(l.formErrors[e.name]),1)):c("",!0)]))),128))])])):c("",!0),B.value.length>0?(a(),s("div",Ge,[n("div",Qe,[(a(!0),s(k,null,U(B.value,e=>(a(),s("div",{key:e.name,class:"space-y-2"},[n("label",{for:e.name,class:"block text-sm font-medium text-gray-700"},[e.emoji?(a(),s("span",Xe,m(e.emoji),1)):e.icon?(a(),s("i",{key:1,class:p([e.icon,"mr-2 text-gray-500"])},null,2)):c("",!0),q(" "+m(e.label)+" ",1),e.required?(a(),s("span",Ye,"*")):c("",!0)],8,We),n("div",Ze,[v(z,{id:e.name,placeholder:e.placeholder,required:e.required,min:e.min||0,max:e.max,step:e.step,"model-value":y(e.name),"onUpdate:modelValue":o=>x(e.name,o),class:p([{"p-invalid":l.formErrors[e.name]},"w-full"]),showButtons:"",buttonLayout:"horizontal"},{incrementbuttonicon:_(()=>t[3]||(t[3]=[n("i",{class:"pi pi-plus"},null,-1)])),decrementbuttonicon:_(()=>t[4]||(t[4]=[n("i",{class:"pi pi-minus"},null,-1)])),_:2},1032,["id","placeholder","required","min","max","step","model-value","onUpdate:modelValue","class"])]),l.formErrors[e.name]?(a(),s("small",Pe,m(l.formErrors[e.name]),1)):c("",!0)]))),128))])])):c("",!0),A.value.length>0?(a(),s("div",et,[n("div",tt,[(a(!0),s(k,null,U(A.value,e=>(a(),s("div",{key:e.name,class:"space-y-2"},[n("label",{for:e.name,class:"block text-sm font-medium text-gray-700"},[e.emoji?(a(),s("span",st,m(e.emoji),1)):e.icon?(a(),s("i",{key:1,class:p([e.icon,"mr-2 text-gray-500"])},null,2)):c("",!0),q(" "+m(e.label)+" ",1),e.required?(a(),s("span",rt,"*")):c("",!0)],8,at),e.type==="select"?(a(),s(k,{key:0},[v(Z,{id:e.name,required:e.required,"model-value":y(e.name),"onUpdate:modelValue":o=>x(e.name,o),options:e.options,optionLabel:"label",optionValue:"value",placeholder:`Select ${e.label}`,class:p([{"p-invalid":l.formErrors[e.name]},"w-full"])},{option:_(o=>[n("div",ot,[o.option.color?(a(),s("span",{key:0,class:p([V(be)(o.option.color),"w-3 h-3 rounded-full"])},null,2)):c("",!0),n("span",null,m(o.option.label),1)])]),_:2},1032,["id","required","model-value","onUpdate:modelValue","options","placeholder","class"]),y(e.name)?(a(),s("div",nt,[n("div",lt,[n("span",{class:p([V(ge)(y(e.name),e),"px-3 py-1.5 text-sm rounded-full border font-medium"])},m(V(he)(y(e.name),e)),3)])])):c("",!0)],64)):e.type==="multi_select"?(a(),E(P,{key:1,id:e.name,"model-value":O(e.name),"onUpdate:modelValue":o=>N(e.name,o),options:e.options,optionLabel:"label",optionValue:"value",placeholder:`Select ${e.label}`,class:p([{"p-invalid":l.formErrors[e.name]},"w-full"]),filter:!0,allowEmpty:!0,display:"chip"},{option:_(o=>[n("div",{class:p(["flex items-center gap-2 px-2 py-1 rounded",V(ke)(o.option)])},[n("span",null,m(o.option.label),1)],2)]),chip:_(o=>[n("div",{class:p(["flex items-center gap-2 px-3 py-1.5 text-sm rounded-full border font-medium",V(xe)(o.value,e)])},[n("span",null,m(typeof o.value=="string"?o.value:o.value?.label||o.value?.value||o.value),1),v(u,{type:"button",onClick:Vt=>J(e.name,o.value||o),class:"ml-1 hover:opacity-75 p-0 w-6 h-6 text-gray-700 hover:text-gray-900",icon:"pi pi-times",size:"small",link:"",rounded:""},null,8,["onClick"])],2)]),_:2},1032,["id","model-value","onUpdate:modelValue","options","placeholder","class"])):c("",!0),l.formErrors[e.name]?(a(),s("small",ct,m(l.formErrors[e.name]),1)):c("",!0)]))),128))])])):c("",!0),L.value.length>0?(a(),s("div",mt,[n("div",ut,[(a(!0),s(k,null,U(L.value,e=>(a(),s("div",{key:e.name,class:"space-y-2"},[n("label",{for:e.name,class:"block text-sm font-medium text-gray-700"},[e.emoji?(a(),s("span",dt,m(e.emoji),1)):e.icon?(a(),s("i",{key:1,class:p([e.icon,"mr-2 text-gray-500"])},null,2)):c("",!0),q(" "+m(e.label)+" ",1),e.required?(a(),s("span",pt,"*")):c("",!0)],8,it),v(ee,{id:e.name,"model-value":K(e.name),"onUpdate:modelValue":o=>R(e.name,o),onUpload:o=>Q(o,e.name),onSelect:o=>H(o,e.name),onProgress:o=>G(o,e.name),class:p([{"p-invalid":l.formErrors[e.name]},"w-full"]),mode:"advanced",multiple:!0,auto:!0,maxFileSize:1e7,accept:"image/*",url:"/.netlify/functions/upload-file","choose-label":"Choose Files","show-upload-button":!1,"show-cancel-button":!1},{empty:_(()=>t[5]||(t[5]=[n("div",{class:"flex flex-col items-center justify-center py-8 text-gray-500"},[n("i",{class:"pi pi-cloud-upload text-4xl mb-4"}),n("span",{class:"text-lg font-medium"},"Drag and drop files to here to upload"),n("span",{class:"text-sm mt-2"},"or click to browse")],-1)])),_:2},1032,["id","model-value","onUpdate:modelValue","onUpload","onSelect","onProgress","class"]),l.formErrors[e.name]?(a(),s("small",yt,m(l.formErrors[e.name]),1)):c("",!0)]))),128))])])):c("",!0),I.value.length>0?(a(),s("div",vt,[n("div",bt,[(a(!0),s(k,null,U(I.value,e=>(a(),s("div",{key:e.name,class:"space-y-2"},[n("label",{for:e.name,class:"block text-sm font-medium text-gray-700"},[e.emoji?(a(),s("span",ht,m(e.emoji),1)):e.icon?(a(),s("i",{key:1,class:p([e.icon,"mr-2 text-gray-500"])},null,2)):c("",!0),q(" "+m(e.label)+" ",1),e.required?(a(),s("span",xt,"*")):c("",!0)],8,gt),e.type==="date"?(a(),E(te,{key:0,id:e.name,placeholder:e.placeholder,required:e.required,"model-value":y(e.name),"onUpdate:modelValue":o=>x(e.name,o),class:p([{"p-invalid":l.formErrors[e.name]},"w-full"]),dateFormat:"yy-mm-dd"},null,8,["id","placeholder","required","model-value","onUpdate:modelValue","class"])):e.type==="rich_text"||e.type==="textarea"?(a(),E(ae,{key:1,id:e.name,placeholder:e.placeholder,required:e.required,"model-value":y(e.name),"onUpdate:modelValue":o=>x(e.name,o),class:p([{"p-invalid":l.formErrors[e.name]},"w-full"]),rows:"3"},null,8,["id","placeholder","required","model-value","onUpdate:modelValue","class"])):(a(),E(d,{key:2,id:e.name,type:e.type,placeholder:e.placeholder,required:e.required,"model-value":y(e.name),"onUpdate:modelValue":o=>x(e.name,o),class:p([{"p-invalid":l.formErrors[e.name]},"w-full"])},null,8,["id","type","placeholder","required","model-value","onUpdate:modelValue","class"])),l.formErrors[e.name]?(a(),s("small",kt,m(l.formErrors[e.name]),1)):c("",!0)]))),128))])])):c("",!0)])):(a(),s("div",_e,[t[0]||(t[0]=n("p",null,"No form fields available.",-1)),v(u,{onClick:Y,severity:"secondary",label:"Retry",class:"mt-2"})])),n("div",_t,[v(u,{type:"button",onClick:X,label:"Cancel",severity:"secondary"}),v(u,{type:"submit",disabled:l.submitting,loading:l.submitting,label:l.submitting?T.value:f.value,severity:"primary"},null,8,["disabled","loading","label"])])],32)}}},wt={class:"mb-8"},Ut={key:0,class:"flex items-center gap-4 mb-4"},qt={class:"text-3xl font-bold text-gray-900 mb-2"},St={__name:"PageHeader",props:{mode:{type:String,required:!0,validator:l=>["add","edit"].includes(l)},databaseTitle:{type:String,required:!0},showBackButton:{type:Boolean,default:!1}},emits:["goBack"],setup(l){return(F,y)=>{const w=M;return a(),s("div",wt,[l.showBackButton?(a(),s("div",Ut,[v(w,{onClick:y[0]||(y[0]=g=>F.$emit("goBack")),severity:"secondary",text:"",class:"p-0"},{default:_(()=>y[1]||(y[1]=[n("div",{class:"bg-gradient-to-r from-blue-500 via-purple-500 via-pink-500 to-orange-500 rounded-lg p-0.5 shadow-lg"},[n("div",{class:"bg-white rounded-md px-3 py-2 flex items-center gap-2"},[n("i",{class:"pi pi-arrow-left bg-gradient-to-r from-blue-500 via-purple-500 via-pink-500 to-orange-500 bg-clip-text text-transparent"}),n("span",{class:"bg-gradient-to-r from-blue-500 via-purple-500 via-pink-500 to-orange-500 bg-clip-text text-transparent font-medium"},"Back")])],-1)])),_:1,__:[1]})])):c("",!0),n("h1",qt,m(l.mode==="add"?"Add New":"Edit")+" "+m(l.databaseTitle),1),n("p",{class:p(["text-gray-600",{"mt-2":l.mode==="edit"}])},m(l.mode==="add"?`Fill out the form below to add a new ${l.databaseTitle.toLowerCase()}`:`Update the ${l.databaseTitle.toLowerCase()} information below`),3)])}}};export{St as _,Ct as a};
