import{g as Y,a as fe,b as ie,N as Z,f as pe,_ as oe,c as me,u as he}from"./_plugin-vue_export-helper-TkE8fKGx.js";import{a as J,u as xe,b as ge}from"./vendor-primevue-BXJVR7wj.js";import{Q as se,c as r,d as s,s as $,e,t as x,z as D,q as Q,h as ee,y as A,F as j,E as C,G as be,v as N,L as W,p as R,r as P,w as ve,x as ye,S as _e,l as de,U as ce,o as we}from"./vendor-vue-3gpeyM8i.js";const $e={class:"text-center space-y-4"},Fe={key:0,class:"space-y-2"},ke={key:1,class:"text-4xl font-bold text-gray-900"},je={key:2,class:"space-y-2"},Ce={key:3,class:"text-lg text-gray-600 max-w-2xl mx-auto"},Le={class:"flex justify-end gap-4 flex-wrap"},Se={__name:"HeaderView",props:{loading:{type:Boolean,default:!1},databaseTitle:{type:String,default:""},databaseDescription:{type:String,default:""}},emits:["refreshSchema"],setup(l,{emit:g}){const u=se(),f=g,h=()=>{f("refreshSchema")},_=()=>{u.push("/add")};return(b,v)=>{const V=J;return s(),r("div",$e,[l.loading&&!l.databaseTitle?(s(),r("div",Fe,v[0]||(v[0]=[e("div",{class:"h-12 bg-gray-200 rounded-lg animate-pulse mx-auto",style:{width:"300px"}},null,-1)]))):(s(),r("h1",ke,x(l.databaseTitle),1)),l.loading&&!l.databaseDescription?(s(),r("div",je,v[1]||(v[1]=[e("div",{class:"h-6 bg-gray-200 rounded-lg animate-pulse mx-auto",style:{width:"500px"}},null,-1),e("div",{class:"h-6 bg-gray-200 rounded-lg animate-pulse mx-auto",style:{width:"400px"}},null,-1)]))):l.databaseDescription?(s(),r("p",Ce,x(l.databaseDescription),1)):$("",!0),e("div",Le,[D(V,{onClick:h,disabled:l.loading,severity:"secondary",text:"",class:"p-0"},{default:Q(()=>v[2]||(v[2]=[e("div",{class:"bg-gradient-to-r from-blue-500 via-purple-500 via-pink-500 to-orange-500 rounded-lg p-0.5 shadow-lg"},[e("div",{class:"bg-white rounded-md px-3 py-2 flex items-center gap-2"},[e("i",{class:"pi pi-refresh bg-gradient-to-r from-blue-500 via-purple-500 via-pink-500 to-orange-500 bg-clip-text text-transparent"}),e("span",{class:"bg-gradient-to-r from-blue-500 via-purple-500 via-pink-500 to-orange-500 bg-clip-text text-transparent font-medium"},"Refresh")])],-1)])),_:1,__:[2]},8,["disabled"]),D(V,{onClick:_,severity:"secondary",text:"",class:"p-0"},{default:Q(()=>v[3]||(v[3]=[e("div",{class:"bg-gradient-to-r from-blue-500 via-purple-500 via-pink-500 to-orange-500 rounded-lg px-3 py-2 shadow-lg flex items-center gap-2"},[e("i",{class:"pi pi-plus text-white"}),e("span",{class:"text-white font-medium"},"Add")],-1)])),_:1,__:[3]})])])}}},Ae={key:0,class:"bg-red-50 border border-red-200 rounded-lg p-4 flex items-start gap-3"},Oe={class:"flex-1"},Ie={class:"text-red-700"},Ne={__name:"ErrorDisplay",props:{error:{type:String,default:""}},emits:["retry"],setup(l){return(g,u)=>{const f=J;return l.error?(s(),r("div",Ae,[u[2]||(u[2]=e("i",{class:"pi pi-exclamation-triangle text-red-500 text-xl"},null,-1)),e("div",Oe,[u[1]||(u[1]=e("strong",{class:"text-red-800"},"Error:",-1)),e("span",Ie,x(l.error),1),D(f,{onClick:g.retry,severity:"danger",text:""},{default:Q(()=>u[0]||(u[0]=[ee(" Try Again ",-1)])),_:1,__:[0]},8,["onClick"])])])):$("",!0)}}},ze={class:"text-center"},Be={key:0},Me={key:1},Ue={__name:"LoadMoreButton",props:{loading:{type:Boolean,default:!1}},emits:["load-more"],setup(l){return(g,u)=>{const f=J;return s(),r("div",ze,[D(f,{onClick:u[0]||(u[0]=h=>g.$emit("load-more")),disabled:l.loading,severity:"secondary"},{default:Q(()=>[l.loading?(s(),r("span",Be,"Loading...")):(s(),r("span",Me,"Load More"))]),_:1},8,["disabled"])])}}},Ve={class:"text-gray-800 leading-relaxed"},De={__name:"RichTextField",props:{value:{type:[Object,String],required:!0}},setup(l){const g=l,u=A(()=>Array.isArray(g.value)?g.value:g.value&&typeof g.value=="object"?g.value.rich_text||g.value.title||[]:typeof g.value=="string"?[{text:{content:g.value},annotations:{}}]:[]),f=h=>{if(!h)return{};const _={};return h.italic&&(_.fontStyle="italic"),h.underline&&(_.textDecoration="underline"),h.strikethrough&&(_.textDecoration="line-through"),h.code&&(_.fontFamily="monospace",_.backgroundColor="#f3f4f6",_.padding="2px 4px",_.borderRadius="4px"),_};return(h,_)=>(s(),r("div",Ve,[(s(!0),r(j,null,C(u.value,(b,v)=>(s(),r("span",{key:v,class:N(b.annotations?.bold?"font-semibold":""),style:be(f(b.annotations))},x(b.text?.content||b.plain_text||""),7))),128))]))}},Re={class:"grid grid-cols-2 gap-4"},qe={key:0,class:"flex items-center space-x-2"},Ee={class:"text-gray-800"},Te={key:1,class:"flex items-center space-x-2"},Pe={class:"text-gray-800"},He={__name:"ContactField",props:{value:{type:[Object,String],required:!0}},setup(l){return(g,u)=>(s(),r("div",Re,[typeof l.value=="string"||l.value?.email?(s(),r("div",qe,[u[0]||(u[0]=e("i",{class:"pi pi-envelope text-blue-500"},null,-1)),e("span",Ee,x(typeof l.value=="string"?l.value:l.value.email),1)])):$("",!0),typeof l.value=="string"||l.value?.phone?(s(),r("div",Te,[u[1]||(u[1]=e("i",{class:"pi pi-phone text-green-500"},null,-1)),e("span",Pe,x(typeof l.value=="string"?l.value:l.value.phone),1)])):$("",!0)]))}},We={class:"space-y-3"},Ge={class:"grid grid-cols-1 sm:grid-cols-2 gap-3"},Je={class:"text-sm font-medium text-gray-700"},Ke={class:"flex items-center space-x-2"},Qe={class:"text-gray-800 font-mono font-medium"},Xe={key:0,class:"text-lg text-gray-600 font-medium"},Ye={__name:"NumbersField",props:{value:{type:Object,required:!0},schema:{type:Object,default:null},formatLabel:{type:Function,required:!0},formatNumber:{type:Function,required:!0},getSchemaProperty:{type:Function,required:!0},getFieldCurrencySymbol:{type:Function,required:!0}},setup(l){return(g,u)=>(s(),r("div",We,[e("div",Ge,[(s(!0),r(j,null,C(l.value,(f,h)=>(s(),r("div",{key:h,class:"flex items-center justify-start bg-gray-50 rounded-lg gap-2 p-2"},[e("i",{class:N([W(Y)(h,l.getSchemaProperty(h)),"text-blue-500"])},null,2),e("span",Je,x(l.formatLabel(h)),1),e("div",Ke,[e("span",Qe,x(l.formatNumber(f||0,h)),1),l.getFieldCurrencySymbol(h)?(s(),r("span",Xe,x(l.getFieldCurrencySymbol(h)),1)):$("",!0)])]))),128))])]))}},Ze={class:"flex items-center space-x-2"},et=["href"],tt={__name:"UrlField",props:{value:{type:[Object,String],required:!0}},setup(l){const g=u=>{try{const f=new URL(u);return f.hostname+f.pathname}catch{return u}};return(u,f)=>(s(),r("div",Ze,[f[0]||(f[0]=e("i",{class:"pi pi-link text-purple-500"},null,-1)),e("a",{href:typeof l.value=="string"?l.value:l.value.url,target:"_blank",rel:"noopener noreferrer",class:"text-purple-600 hover:text-purple-800 underline truncate max-w-xs"},x(g(typeof l.value=="string"?l.value:l.value.url)),9,et)]))}},st={class:"flex items-center space-x-2"},rt={class:"text-gray-800"},lt={__name:"DateField",props:{value:{type:[Object,String],required:!0}},setup(l){const g=u=>u?new Date(u).toLocaleDateString():"";return(u,f)=>(s(),r("div",st,[f[0]||(f[0]=e("i",{class:"pi pi-calendar text-indigo-500"},null,-1)),e("span",rt,x(g(typeof l.value=="string"?l.value:l.value.date?.start||l.value.date)),1)]))}},it={class:"flex flex-wrap gap-2"},at={__name:"SelectField",props:{value:{type:[Object,Array],required:!0},fieldName:{type:String,required:!0},schema:{type:Object,default:null}},setup(l){const g=l,u=A(()=>({name:g.fieldName,options:h(g.fieldName,g.schema)})),f=A(()=>typeof g.value=="string"&&g.value.trim()?[{value:g.value,label:g.value,name:g.value}]:Array.isArray(g.value)&&g.value.length>0?g.value.map(_=>({value:_,label:_,name:_})):fe(g.value)),h=(_,b)=>!b||!b.properties||!b.properties[_]?[]:b.properties[_].options||[];return(_,b)=>(s(),r("div",it,[(s(!0),r(j,null,C(f.value,v=>(s(),r("span",{key:v.value||v,class:N([W(ie)(v,u.value,l.schema),"px-3 py-1.5 text-sm rounded-full border font-medium"])},x(v.label||v),3))),128))]))}},nt={class:"flex items-center gap-2"},ot={key:0,class:"flex items-center gap-1 bg-green-500 text-white px-2 py-1 rounded-full text-sm"},dt={class:"font-medium"},ct={key:1,class:"flex items-center gap-1 bg-gray-200 text-gray-600 px-2 py-1 rounded-full text-sm"},ut={class:"font-medium"},ae={__name:"BooleanField",props:{value:{type:Boolean,required:!0},fieldName:{type:String,required:!0},formatLabel:{type:Function,required:!0}},setup(l){return(g,u)=>(s(),r("div",nt,[l.value?(s(),r("div",ot,[u[0]||(u[0]=e("i",{class:"pi pi-check-circle"},null,-1)),e("span",dt,x(l.formatLabel(l.fieldName)),1)])):(s(),r("div",ct,[u[1]||(u[1]=e("i",{class:"pi pi-times-circle"},null,-1)),e("span",ut,x(l.formatLabel(l.fieldName)),1)]))]))}},pt={class:"text-gray-800 leading-relaxed"},ue={__name:"TextField",props:{value:{type:[String,Number],required:!0}},setup(l){return(g,u)=>(s(),r("div",pt,x(l.value),1))}},gt={class:"space-y-3"},ft={key:0,class:"space-y-2"},mt={class:"flex items-center space-x-3"},ht={key:0,class:"flex-shrink-0"},xt=["src","alt"],bt={key:1,class:"pi pi-file text-blue-500 text-lg"},vt={class:"flex-1 min-w-0"},yt={class:"text-sm font-medium text-gray-900 truncate"},_t={key:0,class:"text-xs text-gray-500"},wt={key:1,class:"text-xs text-blue-600 hover:text-blue-800"},$t=["href"],Ft={key:1,class:"text-center py-4 text-gray-500"},kt={__name:"FileField",props:{value:{type:[Array,Object,String],required:!0},showRemoveButton:{type:Boolean,default:!1}},emits:["remove-file"],setup(l,{emit:g}){const u=l,f=g,h=A(()=>{if(!u.value)return[];if(Array.isArray(u.value))return u.value;if(typeof u.value=="object"&&u.value.files)return u.value.files;if(typeof u.value=="string")try{const y=JSON.parse(u.value);return Array.isArray(y)?y:[y]}catch{return[]}return[]}),_=y=>{if(!y)return"";const U=["Bytes","KB","MB","GB"],O=Math.floor(Math.log(y)/Math.log(1024));return Math.round(y/Math.pow(1024,O)*100)/100+" "+U[O]},b=y=>{f("remove-file",y)},v=y=>{if(!y)return!1;if(y.type)return y.type.startsWith("image/");const U=y.name||y.filename||"";return[".jpg",".jpeg",".png",".gif",".bmp",".webp",".svg"].some(S=>U.toLowerCase().endsWith(S))},V=y=>y.url?y.url:y.preview?y.preview:y.file&&y.file instanceof File?URL.createObjectURL(y.file):"",q=y=>{console.warn("Failed to load image preview:",y.target.src)};return(y,U)=>{const O=J;return s(),r("div",gt,[h.value.length>0?(s(),r("div",ft,[(s(!0),r(j,null,C(h.value,(S,E)=>(s(),r("div",{key:E,class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg border border-gray-200"},[e("div",mt,[v(S)?(s(),r("div",ht,[e("img",{src:V(S),alt:S.name||S.filename||"Image preview",class:"w-12 h-12 object-cover rounded-lg border border-gray-200",onError:q},null,40,xt)])):(s(),r("i",bt)),e("div",vt,[e("p",yt,x(S.name||S.filename||"Unknown file"),1),S.size?(s(),r("p",_t,x(_(S.size)),1)):$("",!0),S.url?(s(),r("p",wt,[e("a",{href:S.url,target:"_blank",rel:"noopener noreferrer",class:"hover:underline"}," View file ",8,$t)])):$("",!0)])]),l.showRemoveButton?(s(),R(O,{key:0,onClick:H=>b(E),icon:"pi pi-times",size:"small",severity:"danger",text:"",rounded:"",class:"ml-2"},null,8,["onClick"])):$("",!0)]))),128))])):(s(),r("div",Ft,U[0]||(U[0]=[e("i",{class:"pi pi-file text-4xl text-gray-300 mb-2 block"},null,-1),e("p",{class:"text-sm"},"No files uploaded",-1)])))])}}};function jt(l="primary",g="small",u=!1){return{buttonPT:A(()=>({root:{class:[Ct(g),Lt(l),"rounded-lg flex items-center justify-center","transition-all duration-300 hover:scale-105 hover:-translate-y-0.5","shadow-lg hover:shadow-xl","focus:outline-none focus:ring-2 focus:ring-offset-2","disabled:opacity-50 disabled:cursor-not-allowed","!border-0"]},icon:{class:u?"m-0":"mr-2"},label:{class:"font-medium"}}))}}function Ct(l){const g={small:"px-3 py-1.5 text-sm",large:"px-6 py-3 text-lg",default:"px-4 py-2"};return g[l]||g.default}function Lt(l){const g={primary:"!bg-blue-600 !hover:bg-blue-700 !text-white focus:ring-blue-500 hover:shadow-[0_20px_40px_rgba(37,99,235,0.3),0_0_20px_rgba(37,99,235,0.2)]",secondary:"!bg-gray-200 !hover:bg-gray-300 !text-gray-700 hover:text-gray-800 border border-gray-300 focus:ring-gray-500 hover:shadow-[0_20px_40px_rgba(107,114,128,0.3),0_0_20px_rgba(107,114,128,0.2)]",danger:"!bg-red-600 !hover:bg-red-700 !text-white focus:ring-red-500 hover:shadow-[0_20px_40px_rgba(239,68,68,0.3),0_0_20px_rgba(239,68,68,0.2)]",success:"!bg-green-600 !hover:bg-green-700 !text-white focus:ring-green-500 hover:shadow-[0_20px_40px_#22c55e4d,0_0_20px_#22c55e33]",warning:"!bg-amber-600 !hover:bg-amber-700 !text-white focus:ring-amber-500 hover:shadow-[0_20px_40px_rgba(217,119,6,0.3),0_0_20px_rgba(217,119,6,0.2)]",info:"!bg-cyan-600 !hover:bg-cyan-700 !text-white focus:ring-cyan-500 hover:shadow-[0_20px_40px_rgba(6,182,212,0.3),0_0_20px_rgba(6,182,212,0.2)]"};return g[l]||g.primary}const te={__name:"IconButton",props:{icon:{type:String,required:!0},severity:{type:String,default:"primary"},size:{type:String,default:"small"}},emits:["click"],setup(l,{emit:g}){const u=l,{buttonPT:f}=jt(u.severity,u.size,!0),h=g,_=()=>{h("click")};return(b,v)=>{const V=J;return s(),R(V,{pt:W(f),icon:l.icon,onClick:_},null,8,["pt","icon"])}}},St={key:0,class:"bg-white hover:shadow-lg text-gray-900 transition-shadow p-4 rounded-lg shadow-lg flex flex-col h-full relative"},At={class:"relative z-10"},Ot={class:"flex justify-end items-start mb-3"},It={class:"flex gap-2"},Nt={key:0,class:"mb-4 flex md:flex-row flex-col gap-2"},zt={class:"flex justify-center mb-4"},Bt={key:0,class:"relative"},Mt=["src","alt"],Ut={class:"text-2xl font-bold text-gray-900"},Vt={key:0,class:"mb-2"},Dt={class:"flex flex-wrap gap-2"},Rt={key:1,class:"mb-4"},qt={class:"grid grid-cols-1 sm:grid-cols-2 gap-1"},Et={class:"flex items-center space-x-1"},Tt={class:"flex items-center space-x-1"},Pt=["title"],Ht={key:2,class:"mb-4"},Wt={class:"grid grid-cols-1 sm:grid-cols-2 gap-3"},Gt={class:"flex items-center space-x-1"},Jt=["title"],Kt={class:"flex items-center space-x-1"},Qt={class:"text-gray-800 font-mono font-medium"},Xt={key:3,class:"mb-4"},Yt={class:"gap-3"},Zt={class:"flex items-center justify-between"},es={class:"flex items-center space-x-2"},ts=["title"],ss={class:"text-gray-800 font-mono font-medium text-lg"},rs={key:4,class:"mb-4"},ls={class:"gap-3"},is={class:"flex items-center space-x-2"},as=["title"],ns={class:"flex items-center space-x-2"},os=["href","title"],ds={key:5,class:"mb-4"},cs={class:"space-y-3"},us={class:"text-sm font-medium text-gray-700 mb-2"},ps={key:0,class:"mr-2 text-base"},gs={key:2,class:"pi pi-paperclip mr-2 text-gray-500"},fs=["title"],ms={class:"space-y-2"},hs={key:0,class:"space-y-2"},xs={class:"flex items-center space-x-3"},bs={key:0,class:"flex-shrink-0"},vs=["src","alt"],ys={key:1,class:"pi pi-file text-blue-500 text-lg"},_s={class:"flex-1 min-w-0"},ws={class:"text-sm font-medium text-gray-900 truncate"},$s={key:0,class:"text-xs text-gray-500"},Fs={class:"flex items-center space-x-2"},ks=["href"],js={key:1,class:"text-center py-4 text-gray-500"},Cs={class:"space-y-3 flex-1"},Ls={key:0,class:"text-sm font-medium text-gray-700 mb-2"},Ss={key:0,class:"mr-2 text-base"},As=["title"],Os={class:"text-xs text-gray-500 mt-auto pt-2 border-t border-gray-100 flex flex-row justify-end"},Is={key:0},Ns={__name:"CardView",props:{item:{type:Object,required:!0},schema:{type:Object,default:null},loading:{type:Boolean,default:!1},editRoute:{type:String,default:"/edit"},itemIdField:{type:String,default:"id"}},emits:["deleteItem"],setup(l,{emit:g}){const u=se(),f=xe(),h=l,_=g,b=A(()=>{if(!h.schema?.properties||!h.item)return{titleFields:[],contactFields:[],booleanFields:[],currencyNumberFields:[],regularNumberFields:[],urlFields:[],fileFields:[],otherFields:[]};const t=h.schema.properties,d=h.item,i={titleFields:[],contactFields:[],booleanFields:[],currencyNumberFields:[],regularNumberFields:[],urlFields:[],fileFields:[],otherFields:[]};return Object.entries(t).forEach(([p,m])=>{const z=d[p];if(!(!z&&m.type!=="checkbox"&&m.type!=="select"&&m.type!=="multi_select"&&m.type!=="files"))switch(m.type){case"title":i.titleFields.push([p,z]);break;case"checkbox":i.booleanFields.push([p,z||!1]);break;case"number":m.number?.format&&m.number.format!=="number"?i.currencyNumberFields.push([p,z||0]):i.regularNumberFields.push([p,z||0]);break;case"url":i.urlFields.push([p,z]);break;case"files":i.fileFields.push([p,m]);break;case"select":case"multi_select":i.otherFields.push([p,m]);break;default:p.toLowerCase().includes("email")||p.toLowerCase().includes("phone")||p.toLowerCase().includes("contact")||m.type==="email"||m.type==="phone"?i.contactFields.push([p,z]):m.type!=="title"&&m.type!=="number"&&m.type!=="checkbox"&&m.type!=="url"&&m.type!=="files"&&i.otherFields.push([p,m])}}),i}),v=A(()=>b.value.titleFields),V=A(()=>b.value.contactFields),q=A(()=>b.value.booleanFields),y=A(()=>b.value.currencyNumberFields),U=A(()=>b.value.regularNumberFields),O=A(()=>b.value.urlFields),S=A(()=>b.value.fileFields),E=A(()=>b.value.otherFields),H=A(()=>{if(!h.schema?.properties)return{};const t={};return Object.entries(h.schema.properties).forEach(([d,i])=>{switch(i.type){case"rich_text":t[d]=De;break;case"url":t[d]=tt;break;case"date":t[d]=lt;break;case"select":case"multi_select":t[d]=at;break;case"checkbox":t[d]=ae;break;case"files":t[d]=kt;break;default:t[d]=ue}}),t}),F=t=>t==="contact"?He:t==="numbers"?Ye:H.value[t]||ue,k=t=>t!=="contact"&&t!=="numbers",o=t=>Z.formatLabel(t),w=(t,d=null)=>{if(typeof t!="number")return t;const i=d?M(d):null;return i?pe(t,i):t.toLocaleString()},L=()=>{const t=h.item[h.itemIdField];u.push(`${h.editRoute}/${t}`)},B=()=>{const t=h.item[h.itemIdField],d=v.value.length>0?v.value[0][1]:"this item";f.require({message:`Are you sure you want to delete "${d}"?`,header:"Confirm Deletion",icon:"pi pi-exclamation-triangle",acceptClass:"p-button-danger",accept:()=>{_("deleteItem",t)},reject:()=>{}})},I=t=>t?new Date(t).toLocaleDateString():"",M=t=>h.schema?.properties?.[t]||null,T=(t,d)=>{const i=t.toLowerCase();return i.includes("email")||d?.type==="email"?"pi pi-envelope text-blue-500":i.includes("phone")||i.includes("mobile")||d?.type==="phone"?"pi pi-phone text-green-500":i.includes("linkedin")||i.includes("social")?"pi pi-linkedin text-blue-600":i.includes("website")||i.includes("url")?"pi pi-globe text-purple-500":i.includes("address")||i.includes("location")?"pi pi-map-marker text-red-500":"pi pi-user text-gray-500"},G=P(""),K=()=>{if(v.value.length>0){const d=v.value[0][1];if(d&&typeof d=="string"){const i=d.trim().split(/\s+/);if(i.length>=2)return`${i[0][0]}${i[i.length-1][0]}`.toUpperCase();if(i.length===1)return i[0][0].toUpperCase()}}const t=Object.values(h.item).find(d=>d&&typeof d=="string"&&d.trim().length>0);return t?t.trim()[0].toUpperCase():"?"},X=t=>{const d=Object.entries(t).find(([p,m])=>m&&(p.toLowerCase().includes("avatar")||p.toLowerCase().includes("profile")||p.toLowerCase().includes("photo")||p.toLowerCase().includes("image")));if(d){const p=d[1];if(Array.isArray(p)&&p.length>0){const m=p[0];if(m&&m.url)return m.url}if(p&&typeof p=="object"&&!Array.isArray(p)){if(p.url)return p.url;if(p.files&&Array.isArray(p.files)&&p.files.length>0){const m=p.files[0];if(m&&m.url)return m.url}}if(typeof p=="string"&&p.trim())return p.trim()}const i=Object.entries(t).find(([p,m])=>{if(m&&typeof m=="object"){if(m.url&&typeof m.url=="string")return!0;if(m.files&&Array.isArray(m.files)&&m.files.length>0)return m.files.some(z=>z&&z.url)}return!1});if(i){const p=i[1];if(p.url)return p.url;if(p.files&&Array.isArray(p.files)&&p.files.length>0){const m=p.files[0];if(m&&m.url)return m.url}}if(h.schema?.properties){const p=Object.entries(h.schema.properties).find(([m,z])=>z.type==="files");if(p){const m=t[p[0]];if(Array.isArray(m)&&m.length>0){const z=m[0];if(z&&z.url)return z.url}}}return null};ve(()=>h.item,t=>{if(t){const d=X(t);G.value=d}},{immediate:!0,deep:!0});const re=t=>{console.error("Avatar image failed to load:",t.target.src)},le=t=>{},a=t=>{if(!t)return!1;if(t.type&&t.type.startsWith("image/"))return!0;const d=t.name||t.filename||"";return[".jpg",".jpeg",".png",".gif",".bmp",".webp",".svg",".tiff",".ico"].some(p=>d.toLowerCase().endsWith(p))},c=t=>t.url?t.url:t.preview?t.preview:t.file&&t.file instanceof File?URL.createObjectURL(t.file):"",n=t=>{if(!t)return"";const d=["Bytes","KB","MB","GB"],i=Math.floor(Math.log(t)/Math.log(1024));return Math.round(t/Math.pow(1024,i)*100)/100+" "+d[i]};return(t,d)=>l.item&&Object.keys(l.item).length>0?(s(),r("div",St,[d[2]||(d[2]=e("div",{class:"absolute inset-0 bg-gradient-to-r from-blue-500 via-purple-500 via-pink-500 to-orange-500 rounded-lg p-0.5 shadow-lg",style:{filter:"drop-shadow(0 10px 25px rgba(0, 144, 247, 0.3)) drop-shadow(0 4px 6px rgba(186, 98, 252, 0.2)) drop-shadow(0 1px 3px rgba(242, 65, 107, 0.2)) drop-shadow(0 0 0 rgba(245, 86, 0, 0.1))"}},[e("div",{class:"bg-white rounded-lg h-full w-full"})],-1)),e("div",At,[e("div",Ot,[e("div",It,[D(te,{icon:"pi pi-pencil",severity:"success",onClick:L}),D(te,{icon:"pi pi-trash",severity:"danger",onClick:B})])]),v.value.length>0?(s(),r("div",Nt,[e("div",zt,[G.value?(s(),r("div",Bt,[e("img",{src:G.value,alt:K(),class:"w-24 h-24 rounded-full border-2 border-gray-200 shadow-md bg-gray-100 object-cover",onError:re,onLoad:le},null,40,Mt)])):(s(),R(W(ge),{key:1,label:K(),size:"xlarge",shape:"circle",class:"border-2 border-gray-200 shadow-md bg-gray-100 p-2"},null,8,["label"]))]),(s(!0),r(j,null,C(v.value,([i,p])=>(s(),r("div",{key:i,class:"flex flex-col justify-start gap-2 mb-2 ml-4"},[e("h2",Ut,x(p),1),q.value.length>0?(s(),r("div",Vt,[e("div",Dt,[(s(!0),r(j,null,C(q.value,([m,z])=>(s(),R(ae,{key:m,value:z,"field-name":m,"format-label":ne=>o(ne)},null,8,["value","field-name","format-label"]))),128))])])):$("",!0)]))),128))])):$("",!0),V.value.length>0?(s(),r("div",Rt,[e("div",qt,[(s(!0),r(j,null,C(V.value,([i,p])=>(s(),r("div",{key:i,class:"flex items-center justify-start bg-blue-50 rounded-lg p-1 gap-1"},[e("div",Et,[e("i",{class:N(T(i,M(i)))},null,2)]),e("div",Tt,[e("span",{class:"text-gray-800 font-medium text-sm truncate max-w-32",title:p||"Not provided"},x(p||"Not provided"),9,Pt)])]))),128))])])):$("",!0),y.value.length>0?(s(),r("div",Ht,[e("div",Wt,[(s(!0),r(j,null,C(y.value,([i,p])=>(s(),r("div",{key:i,class:"flex flex-col items-center justify-between bg-green-50 rounded-lg p-1 border border-green-200"},[e("div",Gt,[e("span",{class:"text-sm font-medium text-gray-700 truncate max-w-24",title:o(i)},x(o(i)),9,Jt)]),e("div",Kt,[e("span",Qt,x(w(p||0,i)),1)])]))),128))])])):$("",!0),U.value.length>0?(s(),r("div",Xt,[e("div",Yt,[(s(!0),r(j,null,C(U.value,([i,p])=>(s(),r("div",{key:i,class:"flex-col items-center justify-between bg-gray-50 rounded-lg p-3"},[e("div",Zt,[e("div",es,[e("i",{class:N([W(Y)(i,M(i)),"text-blue-500"])},null,2),e("span",{class:"text-sm font-medium text-gray-700",title:o(i)},x(o(i)),9,ts)]),e("span",ss,x(w(p||0,i)),1)])]))),128))])])):$("",!0),O.value.length>0?(s(),r("div",rs,[e("div",ls,[(s(!0),r(j,null,C(O.value,([i,p])=>(s(),r("div",{key:i,class:"flex-col items-center justify-between bg-purple-50 rounded-lg p-3 border border-purple-200"},[e("div",is,[d[0]||(d[0]=e("i",{class:"pi pi-link text-purple-600"},null,-1)),e("span",{class:"text-sm font-medium text-gray-700",title:o(i)},x(o(i)),9,as)]),e("div",ns,[e("a",{href:p,target:"_blank",rel:"noopener noreferrer",class:"text-purple-600 hover:text-purple-800 underline",title:p},x(p||"No URL"),9,os)])]))),128))])])):$("",!0),S.value.length>0?(s(),r("div",ds,[e("div",cs,[(s(!0),r(j,null,C(S.value,([i,p])=>(s(),r("div",{key:i,class:"space-y-1"},[e("div",us,[p?.emoji?(s(),r("span",ps,x(p.emoji),1)):p?.icon?(s(),r("i",{key:1,class:N([p.icon,"mr-2 text-gray-500"])},null,2)):(s(),r("i",gs)),e("span",{class:"truncate max-w-32",title:o(i)},x(o(i)),9,fs)]),e("div",ms,[l.item[i]&&Array.isArray(l.item[i])&&l.item[i].length>0?(s(),r("div",hs,[(s(!0),r(j,null,C(l.item[i],(m,z)=>(s(),r("div",{key:z,class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg border border-gray-200"},[e("div",xs,[a(m)?(s(),r("div",bs,[e("img",{src:c(m),alt:m.name||"File preview",class:"w-12 h-12 object-cover rounded-lg border border-gray-200"},null,8,vs)])):(s(),r("i",ys)),e("div",_s,[e("p",ws,x(m.name||"Unknown file"),1),m.size?(s(),r("p",$s,x(n(m.size)),1)):$("",!0)])]),e("div",Fs,[m.url?(s(),r("a",{key:0,href:m.url,target:"_blank",rel:"noopener noreferrer",class:"text-sm text-blue-600 hover:text-blue-800 hover:underline"}," View ",8,ks)):$("",!0)])]))),128))])):(s(),r("div",js,d[1]||(d[1]=[e("i",{class:"pi pi-file text-4xl text-gray-300 mb-2 block"},null,-1),e("p",{class:"text-sm"},"No files uploaded",-1)])))])]))),128))])])):$("",!0),e("div",Cs,[(s(!0),r(j,null,C(E.value,([i,p])=>(s(),r("div",{key:i,class:"space-y-1 pt-2 border-b border-gray-100 last:border-b-0"},[k(i)?(s(),r("div",Ls,[p?.emoji?(s(),r("span",Ss,x(p.emoji),1)):p?.icon?(s(),r("i",{key:1,class:N([p.icon,"mr-2 text-gray-500"])},null,2)):$("",!0),e("span",{class:"truncate max-w-32",title:o(i)},x(o(i)),9,As)])):$("",!0),(s(),R(ye(F(i)),{value:l.item[i],"field-name":i,schema:l.schema},null,8,["value","field-name","schema"]))]))),128))]),e("div",Os,[e("span",null,"Added: "+x(I(l.item.created_time)),1),l.item.last_edited_time!==l.item.created_time?(s(),r("span",Is," â€¢ Updated: "+x(I(l.item.last_edited_time)),1)):$("",!0)])])])):$("",!0)}},zs={class:"relative"},Bs={class:"relative z-10 bg-white rounded-lg overflow-hidden"},Ms={class:"overflow-x-auto"},Us={class:"w-full"},Vs={class:"bg-gray-50 border-b border-gray-200"},Ds={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider md:sticky md:left-0 bg-gray-50 z-10"},Rs={class:"flex items-center space-x-2"},qs={class:"flex items-center space-x-2"},Es={class:"flex items-center space-x-2"},Ts={class:"flex items-center space-x-2"},Ps={class:"flex items-center space-x-2"},Hs={class:"flex items-center space-x-2"},Ws={class:"bg-white divide-y divide-gray-200"},Gs={class:"px-6 py-4 whitespace-nowrap left-0 bg-white z-10"},Js={class:"flex items-center space-x-3"},Ks={key:0,class:"flex-shrink-0"},Qs=["src","alt"],Xs={class:"text-sm font-medium text-gray-900"},Ys={key:0,class:"flex flex-wrap gap-2 mt-1"},Zs={class:"text-xs text-gray-500 mt-1"},er={class:"text-sm text-gray-600"},tr={class:"text-sm"},sr={key:0,class:"flex items-center space-x-2"},rr={class:"text-gray-900 font-mono"},lr={key:1,class:"text-gray-900 font-mono"},ir={class:"flex flex-wrap gap-1"},ar={key:0,class:"text-sm text-gray-400"},nr={class:"space-y-2"},or={key:0,class:"space-y-1"},dr={key:0,class:"flex-shrink-0"},cr=["src","alt"],ur={key:1,class:"pi pi-file text-blue-500 text-sm"},pr={class:"flex-1 min-w-0"},gr={class:"text-xs text-gray-900 truncate"},fr=["href"],mr={key:0,class:"text-xs text-gray-500"},hr={key:1,class:"text-sm text-gray-400"},xr={key:0,class:"text-sm"},br={key:1,class:"text-sm text-gray-400"},vr={key:1,class:"text-sm"},yr=["href"],_r={key:1,class:"text-sm text-gray-400"},wr={key:2,class:"text-sm text-gray-900"},$r={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium sticky right-0 bg-white z-10"},Fr={class:"flex gap-2 justify-end md:flex-row flex-col"},kr={__name:"TableView",props:{items:{type:Array,default:()=>[]},schema:{type:Object,default:null}},emits:["deleteItem"],setup(l,{emit:g}){const u=se(),f=l,h=g,_=a=>{if(!f.schema?.properties||!a)return null;const c=Object.entries(f.schema.properties).find(([n,t])=>t.type==="title");return c?a[c[0]]:null},b=a=>{if(!f.schema?.properties||!a)return[];const c=[];return Object.entries(f.schema.properties).forEach(([n,t])=>{t.type==="checkbox"&&a[n]!==void 0&&c.push([n,a[n]||!1])}),c},v=a=>{const c=a.toLowerCase();return c.includes("email")?"pi pi-envelope":c.includes("phone")||c.includes("mobile")?"pi pi-phone":c.includes("linkedin")||c.includes("social")?"pi pi-linkedin":c.includes("website")||c.includes("url")?"pi pi-globe":c.includes("address")||c.includes("location")?"pi pi-map-marker":"pi pi-user"},V=(a,c)=>{const n=a.toLowerCase();return c.type==="url"?"pi pi-link":c.type==="date"?"pi pi-calendar":c.type==="select"?"pi pi-list":c.type==="rich_text"?"pi pi-file-edit":c.type==="files"?"pi pi-file":c.type==="avatar"||n.includes("avatar")||n.includes("profile")||n.includes("photo")?"pi pi-user":n.includes("bio")||n.includes("description")||n.includes("notes")?"pi pi-file-text":(n.includes("status"),"pi pi-info-circle")},q=a=>{if(!f.schema?.properties?.[a])return!1;const c=f.schema.properties[a];return c.type==="number"&&c.number?.format&&c.number.format!=="number"},y=a=>{const c=_(a);if(c&&typeof c=="string"){const t=c.trim().split(/\s+/);if(t.length>=2)return`${t[0][0]}${t[t.length-1][0]}`.toUpperCase();if(t.length===1)return t[0][0].toUpperCase()}const n=Object.values(a).find(t=>t&&typeof t=="string"&&t.trim().length>0);return n?n.trim()[0].toUpperCase():"?"},U=a=>{const c=Object.entries(a).find(([t,d])=>d&&(t.toLowerCase().includes("avatar")||t.toLowerCase().includes("profile")||t.toLowerCase().includes("photo")||t.toLowerCase().includes("image")));if(c){const t=c[1];if(Array.isArray(t)&&t.length>0){const d=t[0];if(d&&d.url)return d.url}if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.url)return t.url;if(t.files&&Array.isArray(t.files)&&t.files.length>0){const d=t.files[0];if(d&&d.url)return d.url}}if(typeof t=="string"&&t.trim())return t.trim()}const n=Object.entries(a).find(([t,d])=>{if(d&&typeof d=="object"){if(d.url&&typeof d.url=="string")return!0;if(d.files&&Array.isArray(d.files)&&d.files.length>0)return d.files.some(i=>i&&i.url)}return!1});if(n){const t=n[1];if(t.url)return t.url;if(t.files&&Array.isArray(t.files)&&t.files.length>0){const d=t.files[0];if(d&&d.url)return d.url}}if(f.schema?.properties){const t=Object.entries(f.schema.properties).find(([d,i])=>i.type==="files");if(t){const d=a[t[0]];if(Array.isArray(d)&&d.length>0){const i=d[0];if(i&&i.url)return i.url}}}return null},O=a=>Z.formatLabel(a),S=(a,c)=>{if(typeof a!="number")return a;const n=f.schema?.properties?.[c];return n?pe(a,n):a.toLocaleString()},E=(a,c)=>typeof a=="object"&&a!==null?a.url?a.url:a.rich_text?a.rich_text.map(n=>n.plain_text).join(""):a.select?a.select.name:a.multi_select?a.multi_select.map(n=>n.name).join(", "):a.date?a.date.start:JSON.stringify(a):a||"N/A",H=a=>a?new Date(a).toLocaleDateString():"",F=(a,c)=>{const n={name:c,options:f.schema?.properties?.[c]?.options||[]};return ie(a,n,f.schema)},k=(a,c)=>{const n={name:c,options:f.schema?.properties?.[c]?.options||[]};return ie({value:a,label:a,name:a},n,f.schema)},o=(a,c)=>{if(!a)return"No selection";const t=(f.schema?.properties?.[c]?.options||[]).find(d=>d.value===a||d.name===a);return t&&(t.label||t.name)||a},w=a=>typeof a=="object"&&a!==null&&a.url||a,L=a=>{if(!a)return!1;if(a.type&&a.type.startsWith("image/"))return!0;const c=a.name||a.filename||"";return[".jpg",".jpeg",".png",".gif",".bmp",".webp",".svg",".tiff",".ico"].some(t=>c.toLowerCase().endsWith(t))},B=a=>a.url?a.url:a.preview?a.preview:a.file&&a.file instanceof File?URL.createObjectURL(a.file):"",I=()=>{if(!f.schema?.properties)return null;const a=Object.entries(f.schema.properties).find(([c,n])=>n.type==="title");return a?O(a[0]):null},M=()=>f.schema?.properties?Object.entries(f.schema.properties).filter(([a,c])=>a.toLowerCase().includes("email")||a.toLowerCase().includes("phone")||a.toLowerCase().includes("contact")||c.type==="email"||c.type==="phone"):[],T=()=>f.schema?.properties?Object.entries(f.schema.properties).filter(([a,c])=>c.type==="number"):[],G=()=>f.schema?.properties?Object.entries(f.schema.properties).filter(([a,c])=>c.type==="multi_select"):[],K=()=>f.schema?.properties?Object.entries(f.schema.properties).filter(([a,c])=>c.type==="files"):[],X=()=>f.schema?.properties?Object.entries(f.schema.properties).filter(([a,c])=>!(c.type==="title"||c.type==="number"||c.type==="multi_select"||c.type==="files"||c.type==="checkbox"||a.toLowerCase().includes("email")||a.toLowerCase().includes("phone")||a.toLowerCase().includes("contact"))):[],re=a=>{u.push(`/edit/${a.id}`)},le=a=>{h("deleteItem",a.id)};return(a,c)=>(s(),r("div",zs,[c[6]||(c[6]=e("div",{class:"absolute inset-0 bg-gradient-to-r from-blue-500 via-purple-500 via-pink-500 to-orange-500 rounded-lg p-0.5 shadow-lg",style:{filter:"drop-shadow(0 10px 25px rgba(0, 144, 247, 0.3)) drop-shadow(0 4px 6px rgba(186, 98, 252, 0.2)) drop-shadow(0 1px 3px rgba(242, 65, 107, 0.2)) drop-shadow(0 0 0 rgba(245, 86, 0, 0.1))"}},[e("div",{class:"bg-white rounded-lg h-full w-full"})],-1)),e("div",Bs,[c[5]||(c[5]=e("div",{class:"bg-gray-50 px-6 py-4 border-b border-gray-200"},[e("h3",{class:"text-lg font-semibold text-gray-900"},"All Items")],-1)),e("div",Ms,[e("table",Us,[e("thead",Vs,[e("tr",null,[e("th",Ds,[e("div",Rs,[c[0]||(c[0]=e("i",{class:"pi pi-user text-blue-500"},null,-1)),e("span",null,x(I()||"Item"),1)])]),(s(!0),r(j,null,C(M(),([n,t])=>(s(),r("th",{key:n,class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},[e("div",qs,[e("i",{class:N([v(n),"text-blue-500"])},null,2),e("span",null,x(O(n)),1)])]))),128)),(s(!0),r(j,null,C(T(),([n,t])=>(s(),r("th",{key:n,class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},[e("div",Es,[e("i",{class:N([W(Y)(n),"text-green-500"])},null,2),e("span",null,x(O(n)),1)])]))),128)),(s(!0),r(j,null,C(G(),([n,t])=>(s(),r("th",{key:n,class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider min-w-48"},[e("div",Ts,[c[1]||(c[1]=e("i",{class:"pi pi-tags text-purple-500"},null,-1)),e("span",null,x(O(n)),1)])]))),128)),(s(!0),r(j,null,C(K(),([n,t])=>(s(),r("th",{key:n,class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider min-w-32"},[e("div",Ps,[c[2]||(c[2]=e("i",{class:"pi pi-paperclip text-blue-500"},null,-1)),e("span",null,x(O(n)),1)])]))),128)),(s(!0),r(j,null,C(X(),([n,t])=>(s(),r("th",{key:n,class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},[e("div",Hs,[e("i",{class:N([V(n,t),"text-gray-500"])},null,2),e("span",null,x(O(n)),1)])]))),128)),c[3]||(c[3]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider sticky right-0 bg-gray-50 z-10"}," Actions ",-1))])]),e("tbody",Ws,[(s(!0),r(j,null,C(l.items,n=>(s(),r("tr",{key:n.id,class:"hover:bg-gray-50"},[e("td",Gs,[e("div",Js,[U(n)?(s(),r("div",Ks,[e("img",{src:U(n),alt:y(n),class:"w-10 h-10 rounded-full border-2 border-gray-200 shadow-sm bg-gray-100 object-cover"},null,8,Qs)])):(s(),R(W(ge),{key:1,label:y(n),size:"medium",shape:"circle",class:"border-2 border-gray-200 shadow-sm bg-gray-100"},null,8,["label"])),e("div",null,[e("div",Xs,x(_(n)||"Untitled"),1),b(n).length>0?(s(),r("div",Ys,[(s(!0),r(j,null,C(b(n),([t,d])=>(s(),R(ae,{key:t,value:d,"field-name":t,"format-label":O},null,8,["value","field-name"]))),128))])):$("",!0),e("div",Zs,x(H(n.created_time)),1)])])]),(s(!0),r(j,null,C(M(),([t,d])=>(s(),r("td",{key:t,class:"px-6 py-4"},[e("div",er,x(n[t]||"Not provided"),1)]))),128)),(s(!0),r(j,null,C(T(),([t,d])=>(s(),r("td",{key:t,class:"px-6 py-4"},[e("div",tr,[q(t)?(s(),r("span",sr,[e("i",{class:N([W(Y)(t),"text-green-500"])},null,2),e("span",rr,x(S(n[t]||0,t)),1)])):(s(),r("span",lr,x(S(n[t]||0,t)),1))])]))),128)),(s(!0),r(j,null,C(G(),([t,d])=>(s(),r("td",{key:t,class:"px-6 py-4 min-w-48"},[e("div",ir,[(s(!0),r(j,null,C(n[t]||[],i=>(s(),r("span",{key:i.name||i,class:N([F(i,t),"px-2 py-1 text-xs rounded-full border font-medium"])},x(i.name||i),3))),128)),!n[t]||n[t].length===0?(s(),r("span",ar," No tags ")):$("",!0)])]))),128)),(s(!0),r(j,null,C(K(),([t,d])=>(s(),r("td",{key:t,class:"px-6 py-4 min-w-32"},[e("div",nr,[n[t]&&Array.isArray(n[t])&&n[t].length>0?(s(),r("div",or,[(s(!0),r(j,null,C(n[t].slice(0,2),(i,p)=>(s(),r("div",{key:p,class:"flex items-center space-x-2"},[L(i)?(s(),r("div",dr,[e("img",{src:B(i),alt:i.name||"File preview",class:"w-8 h-8 object-cover rounded border border-gray-200"},null,8,cr)])):(s(),r("i",ur)),e("div",pr,[e("p",gr,x(i.name||"Unknown file"),1),i.url?(s(),r("a",{key:0,href:i.url,target:"_blank",rel:"noopener noreferrer",class:"text-xs text-blue-600 hover:text-blue-800 hover:underline"}," View ",8,fr)):$("",!0)])]))),128)),n[t].length>2?(s(),r("div",mr," +"+x(n[t].length-2)+" more files ",1)):$("",!0)])):(s(),r("div",hr," No files "))])]))),128)),(s(!0),r(j,null,C(X(),([t,d])=>(s(),r("td",{key:t,class:"px-6 py-4"},[d.type==="select"?(s(),r("div",xr,[n[t]?(s(),r("span",{key:0,class:N([k(n[t],t),"px-2 py-1 text-xs rounded-full border font-medium"])},x(o(n[t],t)),3)):(s(),r("span",br,"No selection"))])):d.type==="url"?(s(),r("div",vr,[n[t]?(s(),r("a",{key:0,href:w(n[t]),target:"_blank",rel:"noopener noreferrer",class:"text-blue-600 hover:text-blue-800 underline flex items-center space-x-1"},[c[4]||(c[4]=e("i",{class:"pi pi-external-link text-xs"},null,-1)),e("span",null,x(w(n[t])),1)],8,yr)):(s(),r("span",_r,"No URL"))])):(s(),r("div",wr,x(E(n[t])),1))]))),128)),e("td",$r,[e("div",Fr,[D(te,{icon:"pi pi-pencil",severity:"success",size:"small",onClick:t=>re(n)},null,8,["onClick"]),D(te,{icon:"pi pi-trash",severity:"danger",size:"small",onClick:t=>le(n)},null,8,["onClick"])])])]))),128))])])])])]))}},jr={class:"bg-white hover:shadow-lg transition-shadow p-4 border-2 border-black rounded-lg shadow-lg flex flex-col h-full"},Cr={class:"text-center py-16 flex-1 flex flex-col items-center justify-center"},Lr={__name:"EmptyState",emits:["add-item"],setup(l){return(g,u)=>{const f=J;return s(),r("div",jr,[e("div",Cr,[u[2]||(u[2]=e("div",{class:"text-6xl mb-4"},"ðŸ“‹",-1)),u[3]||(u[3]=e("h3",{class:"text-2xl font-semibold text-gray-900 mb-2"},"No items yet",-1)),u[4]||(u[4]=e("p",{class:"text-gray-600 mb-6 text-center max-w-md"},"Start building your collection by adding your first item to get started.",-1)),D(f,{onClick:u[0]||(u[0]=h=>g.$emit("add-item")),severity:"primary"},{default:Q(()=>u[1]||(u[1]=[e("i",{class:"pi pi-plus mr-2"},null,-1),ee("Add First Item ",-1)])),_:1,__:[1]})])])}}},Sr={class:"flex gap-4 items-center mb-6"},Ar={__name:"SearchFilterSkeleton",setup(l){return(g,u)=>(s(),r("div",Sr,u[0]||(u[0]=[_e('<div class="relative flex-1"><div class="absolute inset-0 bg-gradient-to-r from-blue-500 via-purple-500 via-pink-500 to-orange-500 rounded-lg p-0.5 shadow-lg" style="filter:drop-shadow(0 10px 25px rgba(0, 144, 247, 0.3)) drop-shadow(0 4px 6px rgba(186, 98, 252, 0.2)) drop-shadow(0 1px 3px rgba(242, 65, 107, 0.2)) drop-shadow(0 0 0 rgba(245, 86, 0, 0.1));"><div class="bg-white rounded-lg h-full w-full"></div></div><div class="relative z-10"><div class="relative"><div class="h-10 bg-gray-200 rounded-lg animate-pulse"></div><div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"><div class="w-4 h-4 bg-gray-300 rounded animate-pulse"></div></div></div></div></div><div class="flex-shrink-0 flex gap-2"><div class="relative"><div class="absolute inset-0 bg-gradient-to-r from-blue-500 via-purple-500 via-pink-500 to-orange-500 rounded-lg p-0.5 shadow-lg" style="filter:drop-shadow(0 10px 25px rgba(0, 144, 247, 0.3)) drop-shadow(0 4px 6px rgba(186, 98, 252, 0.2)) drop-shadow(0 1px 3px rgba(242, 65, 107, 0.2)) drop-shadow(0 0 0 rgba(245, 86, 0, 0.1));"><div class="bg-white rounded-lg h-full w-full"></div></div><div class="relative z-10 px-3 py-2.5 rounded-lg flex items-center gap-2"><div class="w-4 h-4 bg-gray-300 rounded animate-pulse"></div><div class="h-4 bg-gray-300 rounded animate-pulse" style="width:60px;"></div></div></div><div class="relative"><div class="absolute inset-0 bg-gradient-to-r from-blue-500 via-purple-500 via-pink-500 to-orange-500 rounded-lg p-0.5 shadow-lg" style="filter:drop-shadow(0 10px 25px rgba(0, 144, 247, 0.3)) drop-shadow(0 4px 6px rgba(186, 98, 252, 0.2)) drop-shadow(0 1px 3px rgba(242, 65, 107, 0.2)) drop-shadow(0 0 0 rgba(245, 86, 0, 0.1));"><div class="bg-white rounded-lg h-full w-full"></div></div><div class="relative z-10 px-3 py-2.5 rounded-lg flex items-center gap-2"><div class="w-4 h-4 bg-gray-300 rounded animate-pulse"></div><div class="h-4 bg-gray-300 rounded animate-pulse" style="width:70px;"></div></div></div></div><div class="flex-shrink-0"><div class="relative"><div class="absolute inset-0 bg-gradient-to-r from-blue-500 via-purple-500 via-pink-500 to-orange-500 rounded-lg p-0.5 shadow-lg" style="filter:drop-shadow(0 10px 25px rgba(0, 144, 247, 0.3)) drop-shadow(0 4px 6px rgba(186, 98, 252, 0.2)) drop-shadow(0 1px 3px rgba(242, 65, 107, 0.2)) drop-shadow(0 0 0 rgba(245, 86, 0, 0.1));"><div class="bg-gray-100 rounded-lg h-full w-full"></div></div><div class="relative z-10 flex bg-gray-100 rounded-lg p-1"><div class="px-3 py-2 rounded-md flex items-center gap-2"><div class="w-4 h-4 bg-gray-300 rounded animate-pulse"></div><div class="h-4 bg-gray-300 rounded animate-pulse" style="width:50px;"></div></div><div class="px-3 py-2 rounded-md flex items-center gap-2"><div class="w-4 h-4 bg-gray-300 rounded animate-pulse"></div><div class="h-4 bg-gray-300 rounded animate-pulse" style="width:60px;"></div></div></div></div></div>',3)])))}},Or={class:"space-y-6"},Ir={key:0},Nr={key:1,class:"space-y-6"},zr={class:"flex flex-col gap-4 lg:hidden"},Br={class:"relative w-full"},Mr={class:"relative z-10"},Ur={class:"relative"},Vr={class:"flex gap-2 items-center"},Dr={class:"flex gap-2 flex-1"},Rr={class:"relative flex-1"},qr={class:"hidden sm:inline"},Er={class:"relative flex-1"},Tr={class:"hidden sm:inline"},Pr={class:"flex-shrink-0"},Hr={class:"relative"},Wr={class:"relative z-10 flex bg-white rounded-lg p-1"},Gr={class:"hidden lg:flex gap-4 items-center"},Jr={class:"relative flex-1"},Kr={class:"relative z-10"},Qr={class:"relative"},Xr={class:"flex-shrink-0 flex gap-2"},Yr={class:"relative"},Zr={class:"relative"},el={class:"flex-shrink-0"},tl={class:"relative"},sl={class:"relative z-10 flex bg-white rounded-lg p-1"},rl={key:0},ll={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},il={__name:"ListView",props:{loading:{type:Boolean,default:!1},loadingMore:{type:Boolean,default:!1},items:{type:Array,default:()=>[]},schema:{type:Object,default:null},hasMore:{type:Boolean,default:!1}},emits:["deleteItem","loadMore"],setup(l,{emit:g}){const u=se(),f=P("card"),h=P(""),_=P(!1),b=P(!1),v=l,V=g,q=A(()=>(v.items.length===0||!v.schema)&&!v.loading),y=A(()=>{if(v.items.length===0)return{verified:"Verified",available:"Available"};const k=Object.entries(v.items[0]).filter(([,I])=>typeof I=="boolean");let o="Verified",w="Available";const L=k.find(([I])=>{const M=I.toLowerCase();return M.includes("verified")||M.includes("verify")});L&&(o=Z.formatLabel(L[0]));const B=k.find(([I])=>{const M=I.toLowerCase();return M.includes("available")||M.includes("hire")||M.includes("hiring")});return B&&(w=Z.formatLabel(B[0])),{verified:o,available:w}}),U=A(()=>{let k=v.items;if(v.items.length>0&&(_.value||b.value),(_.value||b.value)&&(k=k.filter(w=>{if(_.value&&b.value){const L=Object.entries(w).some(([I,M])=>{if(typeof M!="boolean")return!1;const T=I.toLowerCase();return(T.includes("verified")||T.includes("verify"))&&M===!0}),B=Object.entries(w).some(([I,M])=>{if(typeof M!="boolean")return!1;const T=I.toLowerCase();return(T.includes("available")||T.includes("hire")||T.includes("hiring"))&&M===!0});return L&&B}return _.value?Object.entries(w).some(([L,B])=>{if(typeof B!="boolean")return!1;const I=L.toLowerCase();return(I.includes("verified")||I.includes("verify"))&&B===!0}):b.value?Object.entries(w).some(([L,B])=>{if(typeof B!="boolean")return!1;const I=L.toLowerCase();return(I.includes("available")||I.includes("hire")||I.includes("hiring"))&&B===!0}):!0})),!h.value.trim())return k;const o=h.value.toLowerCase().trim();return k.filter(w=>Object.entries(w).some(([,L])=>L==null?!1:typeof L=="string"?L.toLowerCase().includes(o):Array.isArray(L)?L.some(B=>typeof B=="string"?B.toLowerCase().includes(o):B.name&&B.name.toLowerCase().includes(o)):typeof L=="object"&&L.name?L.name.toLowerCase().includes(o):typeof L=="number"?L.toString().includes(o):!1))}),O=()=>{h.value=""},S=()=>{_.value=!_.value},E=()=>{b.value=!b.value},H=()=>{u.push("/add")},F=k=>{V("deleteItem",k)};return(k,o)=>(s(),r("div",Or,[l.loading||!l.schema||l.items.length===0?(s(),r("div",Ir,[D(Ar),D(oe,{count:6,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"})])):l.schema&&l.items.length>0?(s(),r("div",Nr,[e("div",zr,[e("div",Br,[o[8]||(o[8]=e("div",{class:"absolute inset-0 bg-gradient-to-r from-blue-500 via-purple-500 via-pink-500 to-orange-500 rounded-lg p-0.5 shadow-lg",style:{filter:"drop-shadow(0 10px 25px rgba(0, 144, 247, 0.3)) drop-shadow(0 4px 6px rgba(186, 98, 252, 0.2)) drop-shadow(0 1px 3px rgba(242, 65, 107, 0.2)) drop-shadow(0 0 0 rgba(245, 86, 0, 0.1))"}},[e("div",{class:"bg-white rounded-lg h-full w-full"})],-1)),e("div",Mr,[e("div",Ur,[de(e("input",{"onUpdate:modelValue":o[0]||(o[0]=w=>h.value=w),type:"text",placeholder:"Search items...",class:"w-full pl-10 pr-4 py-2.5 bg-white border-0 rounded-lg text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-0"},null,512),[[ce,h.value]]),o[7]||(o[7]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("i",{class:"pi pi-search text-gray-400"})],-1)),h.value?(s(),r("button",{key:0,onClick:O,class:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600"},o[6]||(o[6]=[e("i",{class:"pi pi-times"},null,-1)]))):$("",!0)])])]),e("div",Vr,[e("div",Dr,[e("div",Rr,[o[11]||(o[11]=e("div",{class:"absolute inset-0 bg-gradient-to-r from-blue-500 via-purple-500 via-pink-500 to-orange-500 rounded-lg p-0.5 shadow-lg",style:{filter:"drop-shadow(0 10px 25px rgba(0, 144, 247, 0.3)) drop-shadow(0 4px 6px rgba(186, 98, 252, 0.2)) drop-shadow(0 1px 3px rgba(242, 65, 107, 0.2)) drop-shadow(0 0 0 rgba(245, 86, 0, 0.1))"}},[e("div",{class:"bg-white rounded-lg h-full w-full"})],-1)),e("button",{onClick:S,class:N(["relative z-10 w-full px-3 py-2.5 rounded-lg text-sm font-medium transition-all duration-200 flex items-center justify-center gap-2",_.value?"bg-green-100 text-green-800 border border-green-300":"bg-white text-gray-600 hover:text-gray-800"])},[o[9]||(o[9]=e("i",{class:"pi pi-check-circle"},null,-1)),e("span",qr,x(y.value.verified),1),o[10]||(o[10]=e("span",{class:"sm:hidden"},"âœ“",-1))],2)]),e("div",Er,[o[14]||(o[14]=e("div",{class:"absolute inset-0 bg-gradient-to-r from-blue-500 via-purple-500 via-pink-500 to-orange-500 rounded-lg p-0.5 shadow-lg",style:{filter:"drop-shadow(0 10px 25px rgba(0, 144, 247, 0.3)) drop-shadow(0 4px 6px rgba(186, 98, 252, 0.2)) drop-shadow(0 1px 3px rgba(242, 65, 107, 0.2)) drop-shadow(0 0 0 rgba(245, 86, 0, 0.1))"}},[e("div",{class:"bg-white rounded-lg h-full w-full"})],-1)),e("button",{onClick:E,class:N(["relative z-10 w-full px-3 py-2.5 rounded-lg text-sm font-medium transition-all duration-200 flex items-center justify-center gap-2",b.value?"bg-blue-100 text-blue-800 border border-blue-300":"bg-white text-gray-600 hover:text-gray-800"])},[o[12]||(o[12]=e("i",{class:"pi pi-user-check"},null,-1)),e("span",Tr,x(y.value.available),1),o[13]||(o[13]=e("span",{class:"sm:hidden"},"ðŸ‘¤",-1))],2)])]),e("div",Pr,[e("div",Hr,[o[17]||(o[17]=e("div",{class:"absolute inset-0 bg-gradient-to-r from-blue-500 via-purple-500 via-pink-500 to-orange-500 rounded-lg p-0.5 shadow-lg",style:{filter:"drop-shadow(0 10px 25px rgba(0, 144, 247, 0.3)) drop-shadow(0 4px 6px rgba(186, 98, 252, 0.2)) drop-shadow(0 1px 3px rgba(242, 65, 107, 0.2)) drop-shadow(0 0 0 rgba(245, 86, 0, 0.1))"}},[e("div",{class:"bg-white rounded-lg h-full w-full"})],-1)),e("div",Wr,[e("button",{onClick:o[1]||(o[1]=w=>f.value="card"),class:N(["px-2 sm:px-3 py-2 rounded-md text-sm font-medium transition-all duration-200",f.value==="card"?"bg-gradient-to-r from-blue-500 via-purple-500 via-pink-500 to-orange-500 text-white shadow-sm":"text-gray-500 hover:text-gray-700"])},o[15]||(o[15]=[e("i",{class:"pi pi-th-large sm:mr-2"},null,-1),e("span",{class:"hidden sm:inline"},"Card",-1)]),2),e("button",{onClick:o[2]||(o[2]=w=>f.value="table"),class:N(["px-2 sm:px-3 py-2 rounded-md text-sm font-medium transition-all duration-200",f.value==="table"?"bg-gradient-to-r from-blue-500 via-purple-500 via-pink-500 to-orange-500 text-white shadow-sm":"text-gray-500 hover:text-gray-700"])},o[16]||(o[16]=[e("i",{class:"pi pi-table sm:mr-2"},null,-1),e("span",{class:"hidden sm:inline"},"Table",-1)]),2)])])])])]),e("div",Gr,[e("div",Jr,[o[20]||(o[20]=e("div",{class:"absolute inset-0 bg-gradient-to-r from-blue-500 via-purple-500 via-pink-500 to-orange-500 rounded-lg p-0.5 shadow-lg",style:{filter:"drop-shadow(0 10px 25px rgba(0, 144, 247, 0.3)) drop-shadow(0 4px 6px rgba(186, 98, 252, 0.2)) drop-shadow(0 1px 3px rgba(242, 65, 107, 0.2)) drop-shadow(0 0 0 rgba(245, 86, 0, 0.1))"}},[e("div",{class:"bg-white rounded-lg h-full w-full"})],-1)),e("div",Kr,[e("div",Qr,[de(e("input",{"onUpdate:modelValue":o[3]||(o[3]=w=>h.value=w),type:"text",placeholder:"Search items...",class:"w-full pl-10 pr-4 py-2.5 bg-white border-0 rounded-lg text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-0"},null,512),[[ce,h.value]]),o[19]||(o[19]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("i",{class:"pi pi-search text-gray-400"})],-1)),h.value?(s(),r("button",{key:0,onClick:O,class:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600"},o[18]||(o[18]=[e("i",{class:"pi pi-times"},null,-1)]))):$("",!0)])])]),e("div",Xr,[e("div",Yr,[o[22]||(o[22]=e("div",{class:"absolute inset-0 bg-gradient-to-r from-blue-500 via-purple-500 via-pink-500 to-orange-500 rounded-lg p-0.5 shadow-lg",style:{filter:"drop-shadow(0 10px 25px rgba(0, 144, 247, 0.3)) drop-shadow(0 4px 6px rgba(186, 98, 252, 0.2)) drop-shadow(0 1px 3px rgba(242, 65, 107, 0.2)) drop-shadow(0 0 0 rgba(245, 86, 0, 0.1))"}},[e("div",{class:"bg-white rounded-lg h-full w-full"})],-1)),e("button",{onClick:S,class:N(["relative z-10 px-3 py-2.5 rounded-lg text-sm font-medium transition-all duration-200 flex items-center gap-2",_.value?"bg-green-100 text-green-800 border border-green-300":"bg-white text-gray-600 hover:text-gray-800"])},[o[21]||(o[21]=e("i",{class:"pi pi-check-circle"},null,-1)),e("span",null,x(y.value.verified),1)],2)]),e("div",Zr,[o[24]||(o[24]=e("div",{class:"absolute inset-0 bg-gradient-to-r from-blue-500 via-purple-500 via-pink-500 to-orange-500 rounded-lg p-0.5 shadow-lg",style:{filter:"drop-shadow(0 10px 25px rgba(0, 144, 247, 0.3)) drop-shadow(0 4px 6px rgba(186, 98, 252, 0.2)) drop-shadow(0 1px 3px rgba(242, 65, 107, 0.2)) drop-shadow(0 0 0 rgba(245, 86, 0, 0.1))"}},[e("div",{class:"bg-white rounded-lg h-full w-full"})],-1)),e("button",{onClick:E,class:N(["relative z-10 px-3 py-2.5 rounded-lg text-sm font-medium transition-all duration-200 flex items-center gap-2",b.value?"bg-blue-100 text-blue-800 border border-blue-300":"bg-white text-gray-600 hover:text-gray-800"])},[o[23]||(o[23]=e("i",{class:"pi pi-user-check"},null,-1)),e("span",null,x(y.value.available),1)],2)])]),e("div",el,[e("div",tl,[o[27]||(o[27]=e("div",{class:"absolute inset-0 bg-gradient-to-r from-blue-500 via-purple-500 via-pink-500 to-orange-500 rounded-lg p-0.5 shadow-lg",style:{filter:"drop-shadow(0 10px 25px rgba(0, 144, 247, 0.3)) drop-shadow(0 4px 6px rgba(186, 98, 252, 0.2)) drop-shadow(0 1px 3px rgba(242, 65, 107, 0.2)) drop-shadow(0 0 0 rgba(245, 86, 0, 0.1))"}},[e("div",{class:"bg-white rounded-lg h-full w-full"})],-1)),e("div",sl,[e("button",{onClick:o[4]||(o[4]=w=>f.value="card"),class:N(["px-3 py-2 rounded-md text-sm font-medium transition-all duration-200",f.value==="card"?"bg-gradient-to-r from-blue-500 via-purple-500 via-pink-500 to-orange-500 text-white shadow-sm":"text-gray-500 hover:text-gray-700"])},o[25]||(o[25]=[e("i",{class:"pi pi-th-large mr-2"},null,-1),ee(" Card View ",-1)]),2),e("button",{onClick:o[5]||(o[5]=w=>f.value="table"),class:N(["px-3 py-2 rounded-md text-sm font-medium transition-all duration-200",f.value==="table"?"bg-gradient-to-r from-blue-500 via-purple-500 via-pink-500 to-orange-500 text-white shadow-sm":"text-gray-500 hover:text-gray-700"])},o[26]||(o[26]=[e("i",{class:"pi pi-table mr-2"},null,-1),ee(" Table View ",-1)]),2)])])])]),f.value==="card"?(s(),r("div",rl,[e("div",ll,[(s(!0),r(j,null,C(U.value,w=>(s(),R(Ns,{key:w.id,item:w,schema:l.schema,onDeleteItem:F},null,8,["item","schema"]))),128)),l.loadingMore?(s(),R(oe,{key:0,count:3,class:"contents"})):$("",!0)])])):f.value==="table"?(s(),R(kr,{key:1,items:U.value,schema:l.schema,onDeleteItem:F},null,8,["items","schema"])):$("",!0)])):q.value?(s(),R(Lr,{key:2,onAddItem:H})):$("",!0),l.hasMore&&!l.loading?(s(),R(Ue,{key:3,loading:l.loadingMore,onLoadMore:k.loadMore},null,8,["loading","onLoadMore"])):$("",!0)]))}},al={class:"home-view"},nl={class:"space-y-8"},ol={__name:"HomeView",setup(l){const g=he(),u=A(()=>g.loading),f=A(()=>g.error),h=A(()=>g.items),_=A(()=>{if(!g.schema?.properties)return null;const k=g.getDatabaseInfo()?.schema?.properties||{};return{...g.schema,properties:Object.fromEntries(Object.entries(g.schema.properties).map(([o,w])=>[o,{...w,type:w.type,required:w.required||!1,emoji:w.emoji||null,icon:w.icon||null,number:w.number||null,select:w.select||null,multi_select:w.multi_select||null,...k[o]&&{number:{...w.number,format:k[o].number?.format||w.number?.format}}}]))}}),b=P(!1),v=P(""),V=P(""),q=P(!1),y=async()=>{try{const[F,k]=await Promise.allSettled([g.ensureSchemaLoaded(),g.fetchAllItems()]);F.status==="rejected"&&console.error("Schema loading failed:",F.reason),k.status==="rejected"&&console.error("Items loading failed:",k.reason),F.status==="fulfilled"&&k.status==="fulfilled"&&U()}catch(F){console.error("Failed to initialize:",F)}},U=()=>{const F=g.getDatabaseInfo();F&&(F.title&&(v.value=F.title),F.description&&(V.value=F.description))},O=async()=>{try{const[F,k]=await Promise.allSettled([g.fetchSchema(!0),g.fetchAllItems()]);F.status==="fulfilled"&&k.status==="fulfilled"?U():(console.error("Schema refresh failed:",F.status==="rejected"?F.reason:"Unknown error"),console.error("Items refresh failed:",k.status==="rejected"?k.reason:"Unknown error"))}catch(F){console.error("Failed to refresh schema:",F)}},S=async()=>{if(!(!q.value||b.value))try{b.value=!0}catch(F){console.error("Failed to load more:",F)}finally{b.value=!1}},E=async()=>{await y()},H=async F=>{try{await g.deleteItem(F),await g.fetchAllItems()}catch(k){console.error("Failed to delete item:",k)}};return we(()=>{y()}),(F,k)=>(s(),r("div",al,[e("div",nl,[D(Se,{loading:u.value,"database-title":v.value,"database-description":V.value,onRefreshSchema:O},null,8,["loading","database-title","database-description"]),D(Ne,{error:f.value,onRetry:E},null,8,["error"]),D(il,{loading:u.value,"loading-more":b.value,items:h.value,schema:_.value,"has-more":q.value,onDeleteItem:H,onLoadMore:S},null,8,["loading","loading-more","items","schema","has-more"])])]))}},pl=me(ol,[["__scopeId","data-v-5925e735"]]);export{pl as default};
